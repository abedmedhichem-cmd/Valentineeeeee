<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ma Valentine üíñ</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#ffe6f0;
  text-align:center;
  overflow-x:hidden;
}

/* √©crans centr√©s */
.screen{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:20px;
}

h1{color:#ff3366;margin:0 0 15px;}
p{color:#7a2a42;margin:0 0 20px;}

button{
  font-size:22px;
  padding:15px 28px;
  border:none;
  border-radius:14px;
  cursor:pointer;
}

#startBtn{background:#ff4d88;color:#fff;}
#yes{background:#ff4d88;color:#fff;margin-right:10px;}
#no{background:#ccc;}

/* PAGE PRINCIPALE */
#main{display:none;padding:40px 15px;}

#slideshow{
  width:min(520px,95vw);
  border-radius:20px;
  box-shadow:0 15px 35px rgba(0,0,0,.2);
  margin:20px auto;
  display:block;
}

/* C≈íURS */
.heart{
  position:fixed;
  font-size:32px;
  animation:fall 2.5s linear forwards;
  pointer-events:none;
}
@keyframes fall{
  from{transform:translateY(-60px);opacity:1;}
  to{transform:translateY(110vh);opacity:0;}
}

/* √âCRAN FINAL */
#final{
  display:none;
  background:rgba(255,230,240,.97);
  z-index:9999;
}
#final h2{
  font-size:38px;
  color:#ff0066;
  margin:0;
  padding:0 14px;
}

/* ===== BATTLE ===== */

.battleBox{
  width:min(560px,95vw);
  background:#fff;
  border-radius:18px;
  padding:18px 16px;
  box-shadow:0 15px 35px rgba(0,0,0,.15);
}

.row{
  display:flex;
  align-items:center;
  gap:12px;
  margin:12px 0;
}

.avatar{
  width:54px;
  height:54px;
  border-radius:50%;
  object-fit:cover;
  border:3px solid #ffd1e2;
}

.barWrap{flex:1;text-align:left;}
.label{font-size:14px;color:#7a2a42;margin-bottom:6px;}

.bar{
  height:16px;
  background:#ffe6f0;
  border-radius:999px;
  overflow:hidden;
}

.fill{
  height:100%;
  width:0%;
  background:#ff7aa8;
  border-radius:999px;
  transition:width .12s linear;
}

.fill.win{background:#ff2f74;}

.pct{
  width:48px;
  font-weight:bold;
  color:#7a2a42;
}
</style>
</head>

<body>

<!-- INTRO MUSIQUE -->
<div id="intro" class="screen">
  <h1>J‚Äôai quelque chose pour toi‚Ä¶ üíñ</h1>
  <p>Clique pour lancer la musique üéµ</p>
  <button id="startBtn">‚ñ∂Ô∏è Musique</button>
</div>

<!-- √âCRAN BATTLE -->
<div id="battle" class="screen" style="display:none;">
  <h1>Petit duel‚Ä¶ üòàüíñ</h1>

  <div class="battleBox">

    <div class="row">
      <img class="avatar" src="me.jpg" alt="Moi">
      <div class="barWrap">
        <div class="label">Moi</div>
        <div class="bar">
          <div id="barMe" class="fill"></div>
        </div>
      </div>
      <div id="pctMe" class="pct">0%</div>
    </div>

    <div class="row">
      <img class="avatar" src="elle.jpg" alt="Elle">
      <div class="barWrap">
        <div class="label">Toi</div>
        <div class="bar">
          <div id="barHer" class="fill win"></div>
        </div>
      </div>
      <div id="pctHer" class="pct">0%</div>
    </div>

  </div>

  <p id="battleMsg" style="margin-top:18px;font-weight:bold;"></p>
</div>

<!-- PAGE SAINT-VALENTIN -->
<div id="main">
  <h1>Est-ce que tu veux √™tre ma Valentine ? üíå</h1>

  <img id="slideshow" src="1.jpg" alt="Nous üíñ">

  <div>
    <button id="yes">Oui ‚ù§Ô∏è</button>
    <button id="no">Non üò¢</button>
  </div>
</div>

<audio id="bgm" src="music.mp3" loop></audio>

<!-- √âCRAN FINAL -->
<div id="final" class="screen">
  <h2>YESSSSS MADAME T‚ÄôAS FAIT LE BON CHOIX !!!!!! üíñ</h2>
</div>

<script>
const intro = document.getElementById("intro");
const main  = document.getElementById("main");
const battle = document.getElementById("battle");
const bgm   = document.getElementById("bgm");
const finalEl = document.getElementById("final");

/* ===== BATTLE ===== */

function showBattle(){
  intro.style.display = "none";
  battle.style.display = "flex";
}

function startBattle(){
  const barMe  = document.getElementById("barMe");
  const barHer = document.getElementById("barHer");
  const pctMe  = document.getElementById("pctMe");
  const pctHer = document.getElementById("pctHer");
  const msg    = document.getElementById("battleMsg");

  let me = 0;
  let her = 0;

  const targetMe = 92;
  const targetHer = 100;

  const timer = setInterval(() => {

    if(me < targetMe) me += 2;
    if(her < targetHer) her += 3;

    if(me > targetMe) me = targetMe;
    if(her > targetHer) her = targetHer;

    barMe.style.width = me + "%";
    barHer.style.width = her + "%";
    pctMe.textContent = me + "%";
    pctHer.textContent = her + "%";

    if(me === targetMe && her === targetHer){
      clearInterval(timer);
      msg.textContent = "Comme d‚Äôhabitude tu gagnes toujours !!!! üíñ";

      setTimeout(() => {
        battle.style.display = "none";
        main.style.display = "block";
      }, 1800);
    }

  }, 60);
}

/* clic musique */
document.getElementById("startBtn").onclick = async () => {
  showBattle();
  try { await bgm.play(); } catch(e) {}
  startBattle();
};

/* ===== DIAPORAMA ===== */

const photos = ["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg","6.jpg"];
let idx = 0;
const img = document.getElementById("slideshow");

setInterval(() => {
  idx = (idx + 1) % photos.length;
  img.src = photos[idx];
}, 2200);

/* ===== C≈íURS ===== */

function hearts(){
  for(let i=0;i<90;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.style.left=Math.random()*100+"vw";
    h.textContent = Math.random()<0.2 ? "üíó" : "‚ù§Ô∏è";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),2500);
  }
}

/* ===== BOUTONS ===== */

document.getElementById("yes").onclick = async () => {
  try { await bgm.play(); } catch(e) {}
  hearts();
  setTimeout(()=>{ finalEl.style.display="flex"; }, 400);
};

const noBtn = document.getElementById("no");

function moveNo(){
  noBtn.style.position="relative";
  noBtn.style.left=(Math.random()*120-60)+"px";
  noBtn.style.top =(Math.random()*80-40)+"px";
}

noBtn.onmouseenter = moveNo;
noBtn.ontouchstart = moveNo;

noBtn.onclick = (e) => { e.target.style.display="none"; };
</script>

</body>
</html>
